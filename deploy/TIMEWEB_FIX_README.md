# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ import.meta.dirname –Ω–∞ TimeWeb

## –ü—Ä–æ–±–ª–µ–º–∞
–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ TimeWeb –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞:
```
TypeError [ERR_INVALID_ARG_TYPE]: The "paths[0]" argument must be of type string. Received undefined
at path.resolve (node:path:1115:7)
```

–≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ `import.meta.dirname` —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è `undefined` –≤ –ø—Ä–æ–¥–∞–∫—à–Ω —Å–±–æ—Ä–∫–µ.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
–°–∫—Ä–∏–ø—Ç—ã –¥–µ–ø–ª–æ—è —É–∂–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

```bash
# –ü—Ä–∏ –¥–µ–ø–ª–æ–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
bash deploy/deploy-app.sh -d your-domain.com
```

### 2. –†—É—á–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω–æ:

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ TimeWeb –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
cd /var/www/alta-slab
node deploy/fix-import-meta-dirname.js ./dist
```

### 3. –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö
–°–∫—Ä–∏–ø—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–∞–∫–∂–µ –≤–∫–ª—é—á–∞–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ TimeWeb:
update-alta-slab
```

## üîç –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

–°–∫—Ä–∏–ø—Ç `fix-import-meta-dirname.js`:

1. **–ù–∞—Ö–æ–¥–∏—Ç –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ –º–µ—Å—Ç–∞** –≤ `dist/index.js`
2. **–ó–∞–º–µ–Ω—è–µ—Ç** `import.meta.dirname` –Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π –∫–æ–¥:
   ```javascript
   // –ë—ã–ª–æ:
   import.meta.dirname
   
   // –°—Ç–∞–ª–æ:
   (__dirname || path.dirname(new URL(import.meta.url).pathname))
   ```
3. **–î–æ–±–∞–≤–ª—è–µ—Ç –∏–º–ø–æ—Ä—Ç path** –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
4. **–°–æ–∑–¥–∞–µ—Ç —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é** –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ñ–∞–π–ª–∞

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
pm2 logs alta-slab

# –ü—Ä–æ–≤–µ—Ä–∫–∞ API
curl http://localhost:5000/api/health

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
pm2 list
```

## üö® –í —Å–ª—É—á–∞–µ –ø—Ä–æ–±–ª–µ–º

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏:

```bash
cd /var/www/alta-slab
cp dist/index.js.backup dist/index.js
pm2 restart alta-slab
```

## ‚ÑπÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**–ü—Ä–∏—á–∏–Ω–∞ –æ—à–∏–±–∫–∏:**
- `import.meta.dirname` - —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è Node.js 20.11.0+
- Webpack –∏ –¥—Ä—É–≥–∏–µ —Å–±–æ—Ä—â–∏–∫–∏ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –µ—ë –ø–æ–ª–Ω–æ—Å—Ç—å—é
- –í –ø—Ä–æ–¥–∞–∫—à–Ω —Å–±–æ—Ä–∫–µ –º–æ–∂–µ—Ç —Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è `undefined`

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π fallback –¥–ª—è –≤—Å–µ—Ö –≤–µ—Ä—Å–∏–π Node.js
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–∞–∫ —Å—Ç–∞—Ä—ã–µ, —Ç–∞–∫ –∏ –Ω–æ–≤—ã–µ –≤–µ—Ä—Å–∏–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–π —Å–±–æ—Ä–∫–µ